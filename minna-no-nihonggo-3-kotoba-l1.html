<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minna No Nihonggo 3 - 語彙 L1</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: #0a0e27;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            color: #fff;
        }

        /* Animated Gradient Background - SAMA dengan homepage */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #0a0e27, #1a1f3a, #0f2847, #0a0e27);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -2;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Floating Geometric Shapes - SAMA dengan homepage */
        .background-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
            pointer-events: none;
        }

        .shape {
            position: absolute;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
        }

        .shape:nth-child(1) {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #00d4ff, #0099ff);
            top: 10%;
            left: 10%;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #00ff88, #00cc6f);
            top: 60%;
            left: 70%;
            border-radius: 50%;
            animation-delay: -5s;
        }

        .shape:nth-child(3) {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ff0080, #cc0066);
            top: 30%;
            left: 80%;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            animation-delay: -10s;
        }

        .shape:nth-child(4) {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #ffaa00, #ff8800);
            top: 70%;
            left: 15%;
            clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
            animation-delay: -15s;
        }

        .shape:nth-child(5) {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, #a000ff, #7700cc);
            top: 15%;
            left: 50%;
            border-radius: 20px;
            animation-delay: -7s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-30px) rotate(90deg);
            }
            50% {
                transform: translateY(-60px) rotate(180deg);
            }
            75% {
                transform: translateY(-30px) rotate(270deg);
            }
        }

        /* Grid pattern overlay */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
            pointer-events: none;
        }

        /* Particle system */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00d4ff;
            border-radius: 50%;
            animation: particleRise 15s infinite ease-in;
            box-shadow: 0 0 10px #00d4ff;
        }

        @keyframes particleRise {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1);
                opacity: 0;
            }
        }

        /* Container utama */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        /* Header kuis */
        .quiz-header {
            text-align: center;
            padding: 2rem;
            background: rgba(10, 14, 39, 0.7);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 16px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .quiz-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
            animation: headerShine 3s infinite;
        }

        @keyframes headerShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .quiz-header h1 {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: #00d4ff;
            margin-bottom: 0.5rem;
            font-weight: 900;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            letter-spacing: 1px;
        }

        .quiz-header p {
            color: rgba(255, 255, 255, 0.7);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
        }

        /* Tombol kembali ke homepage */
        .back-button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #0f2847, #1a1f3a);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .back-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .back-button:hover::before {
            left: 100%;
        }

        .back-button:hover {
            background: linear-gradient(135deg, #1a1f3a, #0f2847);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
            transform: translateY(-2px);
        }

        /* Summary stats box */
        .stats-box {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: rgba(26, 31, 58, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .stats-group {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item .stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            text-shadow: 0 0 10px currentColor;
        }

        .stat-item .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-correct { color: #00ff88; }
        .stat-empty { color: #ff0080; }
        .stat-total { color: #00d4ff; }

        /* Action button */
        .action-button {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(135deg, #0f2847, #1a1f3a);
            color: white;
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .action-button:hover::before {
            left: 100%;
        }

        .action-button:hover {
            background: linear-gradient(135deg, #1a1f3a, #0f2847);
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
            transform: translateY(-2px);
        }

        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Completion notification */
        .completion-notification {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(255, 170, 0, 0.1);
            border-left: 4px solid #ffaa00;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.3);
        }

        .completion-notification p {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }

        .completion-notification .score {
            font-size: 1.5rem;
            font-weight: 900;
            color: #00ff88;
            text-shadow: 0 0 10px #00ff88;
        }

        /* Quiz grid */
        .quiz-container {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            margin-top: 2rem;
        }

        /* Quiz card */
        .quiz-card {
            background: rgba(26, 31, 58, 0.8);
            border-radius: 16px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        /* Tech corner accents */
        .quiz-card::before,
        .quiz-card::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid #00d4ff;
            transition: all 0.3s ease;
            opacity: 0.5;
        }

        .quiz-card::before {
            top: 10px;
            left: 10px;
            border-right: none;
            border-bottom: none;
        }

        .quiz-card::after {
            bottom: 10px;
            right: 10px;
            border-left: none;
            border-top: none;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), 0 0 30px rgba(0, 212, 255, 0.3);
            border-color: rgba(0, 212, 255, 0.5);
        }

        .quiz-card:hover::before,
        .quiz-card:hover::after {
            width: 30px;
            height: 30px;
            opacity: 1;
        }

        .quiz-card.card-correct {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        /* Kanji section */
        .kanji-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }

        .kanji-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: #00d4ff;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .kanji-text {
            font-size: 2.5rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        /* Input section */
        .input-section {
            margin-bottom: 1rem;
        }

        .input-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
            display: block;
        }

        .vocab-input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(15, 40, 71, 0.6);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .vocab-input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        .vocab-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
            background: rgba(15, 40, 71, 0.8);
        }

        .vocab-input:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Input feedback states */
        .input-correct {
            border-color: #00ff88 !important;
            background: rgba(0, 255, 136, 0.1) !important;
            color: #00ff88 !important;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3) !important;
        }

        .input-incorrect {
            border-color: #ff0080 !important;
            background: rgba(255, 0, 128, 0.1) !important;
            color: #ff0080 !important;
            box-shadow: 0 0 15px rgba(255, 0, 128, 0.3) !important;
        }

        .input-revealed {
            border-color: #ffaa00 !important;
            background: rgba(255, 170, 0, 0.1) !important;
            color: #ffaa00 !important;
        }

        /* Meaning boxes */
        .meaning-box {
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }

        .meaning-box.hidden {
            display: none;
        }

        .meaning-id {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
        }

        .meaning-en {
            background: rgba(0, 212, 255, 0.1);
            border-color: #00d4ff;
        }

        .meaning-label {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.3rem;
        }

        .meaning-id .meaning-label {
            color: #00ff88;
        }

        .meaning-en .meaning-label {
            color: #00d4ff;
        }

        .meaning-text {
            color: white;
            font-weight: 600;
            font-size: 1rem;
        }

        /* Reset button */
        .reset-button {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #00ff88, #00cc6f);
            color: #0a0e27;
            border: none;
            border-radius: 12px;
            font-weight: 900;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reset-button:hover {
            background: linear-gradient(135deg, #00cc6f, #00ff88);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(0, 255, 136, 0.5);
        }

        /* Bottom action container */
        .bottom-action {
            text-align: center;
            margin-top: 3rem;
            margin-bottom: 3rem;
        }

        .bottom-action.hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .quiz-container {
                grid-template-columns: 1fr;
            }

            .stats-group {
                flex-direction: column;
                gap: 1rem;
            }

            .stats-box {
                flex-direction: column;
            }

            .action-button {
                width: 100%;
                margin-top: 1rem;
            }

            .kanji-text {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background Elements - SAMA dengan homepage -->
    <div class="background-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>
    <div class="grid-overlay"></div>
    <div class="particles" id="particles"></div>

    <div class="container">
        <!-- Tombol kembali -->
        <a href="index.html" class="back-button">← Kembali ke Homepage</a>

        <!-- Header kuis -->
        <div class="quiz-header">
            <h1>Minna No Nihonggo 3 - Kotoba L1</h1>
            <p>Tuliskan hiragana/Katakana (cara baca) yang benar.</p>
        </div>

        <!-- Stats box -->
        <div class="stats-box">
            <div class="stats-group">
                <div class="stat-item">
                    <p id="correct-count-display" class="stat-number stat-correct">0</p>
                    <p class="stat-label">Benar</p>
                </div>
                <div class="stat-item">
                    <p id="empty-count-display" class="stat-number stat-empty">0</p>
                    <p class="stat-label">Kosong</p>
                </div>
                <div class="stat-item">
                    <p id="total-count-display" class="stat-number stat-total">0</p>
                    <p class="stat-label">Total</p>
                </div>
            </div>
            
            <button onclick="showAllAnswers()" id="action-button" class="action-button">
                Selesaikan Quiz!
            </button>
        </div>

        <!-- Completion notification -->
        <div id="completion-notification" class="completion-notification hidden">
            <p>Kuis Selesai! Skor Anda:</p>
            <p class="score">
                <span id="notification-correct-count">0</span> Benar 
                dari 
                <span id="notification-total-count">0</span> Kata
            </p>
            <p>Anda sekarang dapat meninjau semua jawaban di bawah.</p>
        </div>

        <!-- Quiz container -->
        <div id="quiz-container" class="quiz-container">
            <!-- Kartu akan di-inject oleh JavaScript -->
        </div>

        <!-- Bottom reset button -->
        <div id="bottom-action-container" class="bottom-action hidden">
            <button onclick="resetQuiz()" class="reset-button">
                Ulangi Kuis!
            </button>
        </div>
    </div>

    <script>
        // Data Kosakata (SAMA dengan kode Anda)
        const MASTER_VOCABULARY_DATA = [
            // --- KOSAKATA L3 ---
            { kanji: 'インタビューする', hiragana: 'インタビューする', arti: 'wawancara', english: 'to interview' },
            { kanji: '担当する', hiragana: 'たんとうする', arti: 'bertanggung jawab atas, menjadi penanggung jawab', english: 'to be in charge of, to be responsible for' },
            { kanji: 'アルバイト先', hiragana: 'アルバイトさき', arti: 'tempat kerja paruh waktu', english: 'part-time workplace' },
            { kanji: '〜先', hiragana: '〜さき', arti: 'tempat', english: 'place, destination' },
            { kanji: '店長', hiragana: 'てんちょう', arti: 'manajer toko', english: 'store manager' },
            { kanji: '研修', hiragana: 'けんしゅう', arti: 'pelatihan', english: 'training, internship' },
            { kanji: '話し合う', hiragana: 'はなしあう', arti: 'berdiskusi', english: 'to discuss, to talk together' },
            { kanji: '通勤する', hiragana: 'つうきんする', arti: 'pulang-pergi kerja', english: 'to commute to work' },
            { kanji: 'これまで', hiragana: 'これまで', arti: 'sampai sekarang', english: 'until now, so far' },
            { kanji: '減らす', hiragana: 'へらす', arti: 'mengurangi', english: 'to reduce, to decrease' },
            { kanji: '引っ越す', hiragana: 'ひっこす', arti: 'pindah (rumah)', english: 'to move (house)' },
            { kanji: '〜か国', hiragana: '〜かこく', arti: '(sejumlah) negara', english: '(a number of) countries' },
            { kanji: '家庭', hiragana: 'かてい', arti: 'rumah tangga, rumah, keluarga', english: 'household, home, family' },
            { kanji: '事情', hiragana: 'じじょう', arti: 'keadaan, alasan', english: 'circumstances, reasons' },
            { kanji: '幼稚園', hiragana: 'ようちえん', arti: 'taman kanak-kanak, prasekolah', english: 'kindergarten, preschool' },
            { kanji: '昼寝する', hiragana: 'ひるねする', arti: 'tidur siang', english: 'to take a nap' },
            { kanji: '帰国する', hiragana: 'きこくする', arti: 'kembali ke negara asal', english: 'to return to one\'s home country' },
            { kanji: '来社', hiragana: 'らいしゃ', arti: 'datang mengunjungi (perusahaan/kantor)', english: 'visit to a company/office' },
            { kanji: '新製品', hiragana: 'しんせいひん', arti: 'produk baru', english: 'new product' },
            { kanji: '新〜', hiragana: 'しん〜', arti: 'baru', english: 'new ~' },
            { kanji: '発表する', hiragana: 'はっぴょうする', arti: 'mengumumkan', english: 'to announce, to present' },
            { kanji: '間に合う', hiragana: 'まにあう', arti: 'tepat waktu', english: 'to be on time' },
            { kanji: '開発する', hiragana: 'かいはつする', arti: 'mengembangkan', english: 'to develop, to invent' },
            { kanji: '進める', hiragana: 'すすめる', arti: 'memajukan', english: 'to advance, to promote' },
            { kanji: 'アンケート', hiragana: 'アンケート', arti: 'kuesioner', english: 'questionnaire' },
            { kanji: '助かる', hiragana: 'たすかる', arti: 'tertolog, terbantu', english: 'to be saved, to be helped' },
            { kanji: '参加者', hiragana: 'さんかしゃ', arti: 'peserta', english: 'participant' },
            { kanji: '集まる', hiragana: 'あつまる', arti: 'berkumpul', english: 'to gather, to collect' },
            { kanji: '留学する', hiragana: 'りゅうがくする', arti: 'belajar di luar negeri', english: 'to study abroad' },
            { kanji: '都合', hiragana: 'つごう', arti: 'kenyamanan, keadaan, jadwal', english: 'convenience, circumstances, schedule' },
            
            // --- KOSAKATA L4 ---
            { kanji: 'しつこい', hiragana: 'しつこい', arti: 'gigih, berulang-ulang', english: 'persistent, repetitive' },
            { kanji: '全員', hiragana: 'ぜんいん', arti: 'semua orang', english: 'everyone, all members' },
            { kanji: '数日', hiragana: 'すうじつ', arti: 'beberapa hari', english: 'several days' },
            { kanji: '親戚', hiragana: 'しんせき', arti: 'kerabat', english: 'relative' },
            { kanji: '接する', hiragana: 'せっする', arti: 'terhubung, menawarkan', english: 'to connect, to offer' },
            { kanji: '申し出る', hiragana: 'もうしでる', arti: 'menawarkan, mengusulkan', english: 'to offer, to propose' },
            { kanji: '結局', hiragana: 'けっきょく', arti: 'pada akhirnya', english: 'in the end, after all' },
            { kanji: 'すぐさま', hiragana: 'すぐさま', arti: 'segera', english: 'immediately, instantly' },
            { kanji: 'そば', hiragana: 'そば', arti: 'di samping, di sebelah', english: 'beside, next to' },
            { kanji: '取り付ける', hiragana: 'とりつける', arti: 'memasang', english: 'to install, to attach' },
            { kanji: '有益', hiragana: 'ゆうえき', arti: 'bermanfaat', english: 'beneficial, profitable' },
            { kanji: '出席者', hiragana: 'しゅっせきしゃ', arti: 'peserta', english: 'attendee, participant' },
            { kanji: '料金', hiragana: 'りょうきん', arti: 'biaya, ongkos', english: 'fee, charge' },
            
            // --- UNGKAPAN & EKSPRESI ---
            { kanji: '〜させていただきます', hiragana: '〜させていただきます', arti: 'mengizinkan saya untuk', english: 'allow me to (humble expression)' },
            { kanji: 'お邪魔します', hiragana: 'おじゃまします', arti: 'permisi, maaf mengganggu (saat masuk)', english: 'Excuse me for intruding (when entering)' },
            { kanji: 'よろしかったでしょうか', hiragana: 'よろしかったでしょうか', arti: 'apakah (jadwal/keputusan) sudah benar? (sangat sopan)', english: 'Was (the decision) correct? (very polite check)' },
            { kanji: 'お忙しいところ', hiragana: 'おいそがしいところ', arti: 'Saat Anda sibuk (ungkapan permulaan yang sopan)', english: 'While you are busy (polite opening phrase)' },
            { kanji: 'お越しいただく', hiragana: 'おこしいただく', arti: 'Datang (bentuk sangat sopan dari 来る)', english: 'To come (very polite form of 来る)' },
            { kanji: 'お目にかかる', hiragana: 'おめにかかる', arti: 'Bertemu (bentuk rendah hati dari 会う)', english: 'To meet (humble form of 会う)' },
            { kanji: 'お手数をおかけしますが', hiragana: 'おてすうをおかけしますが', arti: 'Maaf merepotkan Anda, tetapi...', english: 'Sorry to bother you, but...' },
            { kanji: '〜ようでして', hiragana: '〜ようでして', arti: 'sepertinya', english: 'it seems like' },
            { kanji: '誠に', hiragana: 'まことに', arti: 'sungguh, sangat (sangat sopan)', english: 'truly, very (very polite)' },
            { kanji: '遠慮', hiragana: 'えんりょ', arti: 'sungkan, malu-malu', english: 'reserve, holding back, hesitation' },
            { kanji: '遠慮なく', hiragana: 'えんりょなく', arti: 'tanpa ragu-ragu', english: 'without reserve, freely' },
            { kanji: '飲み足りない', hiragana: 'のみたりない', arti: 'tidak cukup minum', english: 'not enough (to drink)' },
            { kanji: '飲み過ぎる', hiragana: 'のみすぎる', arti: 'terlalu banyak minum', english: 'too much (to drink)' },
            { kanji: '飲みやすい', hiragana: 'のみやすい', arti: 'mudah diminum', english: 'easy to (drink)' },
            { kanji: '飲みにくい', hiragana: 'のみにくい', arti: 'sulit diminum', english: 'hard to (drink)' },
            { kanji: '飲みたがる', hiragana: 'のみたがる', arti: 'ingin minum (orang ketiga)', english: 'wants to (drink) (third person)' },
            { kanji: 'あまりにも', hiragana: 'あまりにも', arti: 'terlalu, sangat', english: 'too much, excessively' },
            { kanji: 'だいたい', hiragana: 'だいたい', arti: 'kurang lebih, pada umumnya', english: 'generally, approximately' },
            { kanji: '例えば', hiragana: 'たとえば', arti: 'contohnya', english: 'for example' },
            { kanji: '恐らく', hiragana: 'おそらく', arti: 'mungkin, barangkali', english: 'perhaps, probably' },
            { kanji: 'なるほど', hiragana: 'なるほど', arti: 'saya mengerti, begitu ya', english: 'I see, indeed' },
            { kanji: 'どちらかと言うと', hiragana: 'どちらかというと', arti: 'jika harus memilih', english: 'if I had to choose, rather' },
            { kanji: '〜から言えば', hiragana: '〜からいえば', arti: 'jika dilihat dari', english: 'if you speak from the point of view of' },
            { kanji: 'どちらでも', hiragana: 'どちらでも', arti: 'yang mana saja', english: 'either way, whichever' },
            { kanji: '〜でよければ', hiragana: '〜でよければ', arti: 'jika itu tidak masalah', english: 'if that is okay' },
            { kanji: '(〜に)対して', hiragana: '(〜に)たいして', arti: 'terhadap', english: 'towards, in contrast to' },
            { kanji: '丁寧な言葉', hiragana: 'ていねいなことば', arti: 'bahasa sopan', english: 'polite language' },
            { kanji: 'けい語', hiragana: 'けいご', arti: 'bahasa hormat (Keigo)', english: 'honorific language' },
            { kanji: '尊敬語', hiragana: 'そんけいご', arti: 'bahasa hormat (Sonkeigo)', english: 'respectful language' },
            { kanji: '謙譲語', hiragana: 'けんじょうご', arti: 'bahasa merendah (Kenjōgo)', english: 'humble language' },
            { kanji: 'ていねいご', hiragana: 'ていねいご', arti: 'bahasa sopan (Teineigo)', english: 'polite language' },
            { kanji: '表現', hiragana: 'ひょうげん', arti: 'ekspresi', english: 'expression' },
            { kanji: '嫌いな言葉', hiragana: 'きらいなことば', arti: 'kata yang tidak disukai', english: 'disliked word' },
            { kanji: '・・・たしかに・・・', hiragana: 'たしかに', arti: '・・・tentu saja・・・', english: '...certainly...' },
            { kanji: 'いつもお電話になっております。', hiragana: 'いつもおでんわになっております。', arti: 'Kami selalu berterima kasih kepada Anda.', english: 'We are always grateful to you. (polite expression)' },
            { kanji: 'あいにく・・・。', hiragana: 'あいにく', arti: 'Sayangnya...', english: 'Unfortunately...' },
            { kanji: '恐れ入りますが、・・・。', hiragana: 'おそれいりますが、', arti: 'Maafkan saya karena bertanya, tetapi...', english: 'Excuse me for asking, but...' },
            { kanji: 'このままでよろしければ', hiragana: 'このままでよろしければ', arti: 'Jika tidak masalah seperti ini', english: 'If it is okay as it is' },
            { kanji: '日本語能力試験', hiragana: 'にほんごのうりょくしけん', arti: 'Ujian Kemampuan Bahasa Jepang (JLPT)', english: 'Japanese Language Proficiency Test (JLPT)' },
            { kanji: '〜に合格する', hiragana: '〜にごうかくする', arti: 'lulus (ujian)', english: 'to pass (an exam)' },
            { kanji: '〜に受かる', hiragana: '〜にうかる', arti: 'lulus (ujian)', english: 'to pass (an exam)' },
            { kanji: '〜に落ちる', hiragana: '〜におちる', arti: 'gagal (ujian)', english: 'to fail (an exam)' },
            { kanji: '〜に不合格', hiragana: '〜にふごうかく', arti: 'gagal (ujian)', english: 'to fail (an exam)' },
            { kanji: '〜にもかかわらず', hiragana: '〜にもかかわらず', arti: 'walaupun, meskipun', english: 'despite, although' },
            { kanji: '〜にかかわらず', hiragana: '〜にかかわらず', arti: 'tanpa memandang, tanpa peduli', english: 'regardless of, irrespective of' },
            { kanji: '最寄り駅', hiragana: 'もよりえき', arti: 'stasiun terdekat', english: 'nearest station' },
            { kanji: '独特', hiragana: 'どくとく', arti: 'unik/khas', english: 'unique / characteristic' },
            { kanji: '〜にとって', hiragana: '〜にとって', arti: 'bagi/menurut', english: 'for / according to' },
            { kanji: '蟻', hiragana: 'あり', arti: 'semut', english: 'ant' },
            { kanji: '浴槽', hiragana: 'よくそう', arti: 'bak mandi', english: 'bathtub' },
            { kanji: '設備', hiragana: 'せつび', arti: 'fasilitas', english: 'facility / equipment' },
            { kanji: '無くなる', hiragana: 'なくなる', arti: 'menghilang/lenyap', english: 'to disappear / to be lost' },
            { kanji: '協力', hiragana: 'きょうりょく', arti: 'kerja sama/bantuan', english: 'cooperation / collaboration' },
            { kanji: '黙る', hiragana: 'だまる', arti: 'diam/membisu', english: 'to be silent / to shut up' },
            { kanji: '繰り返す', hiragana: 'くりかえす', arti: 'mengulang', english: 'to repeat / to do over' },
            { kanji: '生きる', hiragana: 'いきる', arti: 'hidup', english: 'to live / to exist' },
            { kanji: '不味い', hiragana: 'まずい', arti: 'tidak enak (rasa)', english: 'bad tasting / unappetizing' },
            { kanji: '国産', hiragana: 'こくさん', arti: 'produksi domestik', english: 'domestic product' },
            { kanji: '誇り', hiragana: 'ほこり', arti: 'kebanggaan/harga diri', english: 'pride / boast' },
            { kanji: '海岸', hiragana: 'かいがん', arti: 'pantai', english: 'coast / beach' },
            { kanji: '左利き', hiragana: 'ひだりきき', arti: 'kidal', english: 'left-handed' },
            { kanji: 'レッテル貼り', hiragana: 'レッテルばり', arti: 'stereotip/pelabelan', english: 'stereotyping / labeling' },
            { kanji: '仮装', hiragana: 'かそう', arti: 'kostum', english: 'costume / disguise' },
            { kanji: '未来', hiragana: 'みらい', arti: 'masa depan', english: 'future (general)' },
            { kanji: '存在', hiragana: 'そんざい', arti: 'keberadaan/eksistensi', english: 'existence / being' },
            { kanji: '硬い/固い/堅い', hiragana: 'かたい', arti: 'keras/kokoh/tangguh', english: 'hard / tough / solid' },
            { kanji: '鳴き声', hiragana: 'なきごえ', arti: 'suara tangisan (hewan/bayi)', english: 'cry / chirp / roar (animal/baby)' },
            { kanji: '段落', hiragana: 'だんらく', arti: 'paragraf', english: 'paragraph' },
            { kanji: 'のみ/ばかり/だけ', hiragana: 'のみ/ばかり/だけ', arti: 'hanya/saja', english: 'only / just' },
            { kanji: '相応しい', hiragana: 'ふさわしい', arti: 'pantas/cocok', english: 'suitable / appropriate' },
            { kanji: '解く', hiragana: 'ほどく', arti: 'melepaskan ikatan', english: 'to untie / to unbind' },
            { kanji: '結ぶ', hiragana: 'むすぶ', arti: 'mengikat', english: 'to tie / to knot' },
            { kanji: '結論', hiragana: 'けつろん', arti: 'kesimpulan', english: 'conclusion' },
            { kanji: '栄養不足', hiragana: 'えいようぶそく', arti: 'kekurangan nutrisi', english: 'malnutrition / lack of nutrition' },
            { kanji: 'バランスを崩す', hiragana: 'バランスをくずす', arti: 'tidak seimbang', english: 'to lose balance' },
            { kanji: '再配達', hiragana: 'さいはいたつ', arti: 'pengiriman ulang', english: 'redelivery' },
            { kanji: '再', hiragana: 'さい', arti: 'lagi/kembali', english: 'again / re-' },
            { kanji: '配達料', hiragana: 'はいたつりょう', arti: 'biaya pengiriman', english: 'delivery fee / postage' },
            { kanji: '本日', hiragana: 'ほんじつ', arti: 'hari ini (formal)', english: 'today (formal)' },
            { kanji: '来客中', hiragana: 'らいきゃくちゅう', arti: 'sedang menerima tamu', english: 'currently receiving a visitor' },
            { kanji: '断る', hiragana: 'ことわる', arti: 'menolak', english: 'to refuse / to reject' },
            { kanji: '無断', hiragana: 'むだん', arti: 'tanpa izin', english: 'without permission' },
            { kanji: '偽物', hiragana: 'にせもの', arti: 'barang palsu/tiruan', english: 'fake / counterfeit item' },
            { kanji: '親友', hiragana: 'しんゆう', arti: 'sahabat karib', english: 'best friend / close friend' },
            { kanji: '破る', hiragana: 'やぶる', arti: 'merobek/melanggar (janji)', english: 'to tear / to break (a promise)' },
            { kanji: '上司', hiragana: 'じょうし', arti: 'atasan', english: 'boss / superior' },
            { kanji: '修正', hiragana: 'しゅうせい', arti: 'koreksi/revisi', english: 'correction / amendment' },
            { kanji: 'もう全く', hiragana: 'もうまったく', arti: 'sama sekali (tidak)', english: 'absolutely (not) / totally' },
            { kanji: '鮮明', hiragana: 'せんめい', arti: 'jelas/gamblang', english: 'clear / vivid / sharp' },
            { kanji: '鮮明の立場', hiragana: 'せんめいのたちば', arti: 'posisi yang jelas', english: 'clear position / clear stance' },
            { kanji: '厚みがある', hiragana: 'あつみがある', arti: 'tebal', english: 'thick / voluminous' },
            { kanji: '各駅停車', hiragana: 'かくえきていしゃ', arti: 'kereta lokal (berhenti di setiap stasiun)', english: 'local train' },
            { kanji: '発言', hiragana: 'はつげん', arti: 'pernyataan/ucapan', english: 'statement / remark' },
            { kanji: '反応', hiragana: 'はんのう', arti: 'reaksi', english: 'reaction / response' },
            { kanji: '初心者', hiragana: 'しょしんしゃ', arti: 'pemula', english: 'beginner / novice' },
            { kanji: '選手', hiragana: 'せんしゅ', arti: 'atlet/pemain', english: 'athlete / player' },
            { kanji: '理解', hiragana: 'りかい', arti: 'pemahaman', english: 'understanding / comprehension' },
            { kanji: '認めます', hiragana: 'みとめます', arti: 'mengakui/mengizinkan', english: 'to acknowledge / to permit' },
            { kanji: 'やはり', hiragana: 'やはり', arti: 'ternyata/memang', english: 'as expected / indeed / after all' },
            { kanji: '価値があります', hiragana: 'かちがあります', arti: 'berharga/bernilai', english: 'valuable / worth something' },
            { kanji: 'はずがない', hiragana: 'はずがない', arti: 'mustahil/tidak mungkin', english: 'impossible / highly unlikely' },
            { kanji: '正直', hiragana: 'しょうじき', arti: 'jujur', english: 'honest / honesty' },
            { kanji: '手先が器用/不器用', hiragana: 'てさきがきよう/ぶきよう', arti: 'terampil/canggung (dengan tangan)', english: 'skillful / clumsy (with hands)' },
            { kanji: '才能', hiragana: 'さいのう', arti: 'bakat', english: 'talent / ability' },
            { kanji: '真剣', hiragana: 'しんけん', arti: 'serius/sungguh-sungguh', english: 'serious / earnest' },
            { kanji: '態度', hiragana: 'たいど', arti: 'sikap/tingkah laku', english: 'attitude / demeanor' },
            { kanji: 'やり方', hiragana: 'やりかた', arti: 'cara/metode', english: 'way of doing / method' },
            { kanji: '打って', hiragana: 'うって', arti: 'memukul/menembak', english: 'to strike / to shoot' },
            { kanji: '引用する', hiragana: 'いんようする', arti: 'mengutip', english: 'to quote / to cite' },
            { kanji: '打ち合わせて', hiragana: 'うちあわせて', arti: 'berdiskusi/bertemu', english: 'to arrange a meeting / to discuss in advance' },
            { kanji: '応募', hiragana: 'おうぼ', arti: 'melamar (pekerjaan)', english: 'application / entry (for a job)' },
            { kanji: '資格', hiragana: 'しかく', arti: 'kualifikasi/izin', english: 'qualification / eligibility' },
            { kanji: '募集', hiragana: 'ぼしゅう', arti: 'rekrutmen/penerimaan', english: 'recruitment / advertisement' },
            { kanji: '責任をとる', hiragana: 'せきにんをとる', arti: 'bertanggung jawab', english: 'to take responsibility' },
            { kanji: '評価が高い', hiragana: 'ひょうかがたかい', arti: 'reputasi/evaluasi tinggi', english: 'high evaluation / high reputation' },
            { kanji: '評価がいい', hiragana: 'ひょうかがいい', arti: 'reputasi/evaluasi baik', english: 'good evaluation / good reputation' },
            { kanji: '満足', hiragana: 'まんぞく', arti: 'puas/memuaskan', english: 'satisfaction / contentment' },
            { kanji: 'わくわくする', hiragana: 'わくわくする', arti: 'bersemangat/gembira', english: 'to be excited / to be thrilled' },
            { kanji: '緊張した', hiragana: 'きんちょうした', arti: 'gugup/tegang', english: 'nervous / tense' },
            { kanji: '期待した', hiragana: 'きたいした', arti: 'berharap/menanti', english: 'to expect / to look forward to' },
            { kanji: 'ストレスを解消する', hiragana: 'ストレスをかいしょうする', arti: 'menghilangkan stres', english: 'to relieve stress' },
            { kanji: 'ワクチンを接種する', hiragana: 'ワクチンをせっしゅする', arti: 'disuntik vaksin', english: 'to be vaccinated' },
            { kanji: 'ワクチンを打ちます', hiragana: 'ワクチンをうちます', arti: 'menyuntikkan vaksin', english: 'to administer a vaccine' },
            { kanji: '芽', hiragana: 'め', arti: 'tunas/pucuk', english: 'sprout / bud' },
            { kanji: '芽生え', hiragana: 'めばえ', arti: 'tunas', english: 'budding / sprouting' },
            { kanji: '生える', hiragana: 'はえる', arti: 'tumbuh (tumbuhan)', english: 'to grow (plant)' },
            { kanji: '散る', hiragana: 'ちる', arti: 'berguguran/bertebaran', english: 'to scatter / to fall (leaves/flowers)' },
            { kanji: '気が散る', hiragana: 'きがちる', arti: 'sulit fokus/terganggu', english: 'to be distracted / to lose focus' },
            { kanji: '夢', hiragana: 'ゆめ', arti: 'mimpi', english: 'dream' },
        ];

        let VOCABULARY_DATA = [];
        let correctCount = 0;
        let totalCount = 0;
        let isComplete = false;
        let emptyCount = 0;

        // Create particle system
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function normalizeString(str) {
            if (typeof str !== 'string') return '';
            str = str.replace(/[\u30a1-\u30ff]/g, function(k) {
                return String.fromCharCode(k.charCodeAt(0) - 0x60);
            });
            return str.toLowerCase().trim();
        }

        function updateCountsDisplay() {
            emptyCount = 0;
            const inputElements = document.querySelectorAll('.vocab-input');
            inputElements.forEach(input => {
                if (input.value.trim() === '') {
                    emptyCount++;
                }
            });

            document.getElementById('correct-count-display').textContent = correctCount;
            document.getElementById('empty-count-display').textContent = emptyCount;
            document.getElementById('total-count-display').textContent = totalCount;
            document.getElementById('notification-total-count').textContent = totalCount;

            if (correctCount === totalCount && !isComplete) {
                isComplete = true;
                showCompletionNotification(correctCount);
                
                document.getElementById('action-button').disabled = true;
                document.getElementById('action-button').classList.add('opacity-50', 'cursor-not-allowed');
                document.getElementById('bottom-action-container').classList.remove('hidden');
            } else if (correctCount < totalCount && isComplete) {
                isComplete = false;
                document.getElementById('completion-notification').classList.add('hidden');
                
                document.getElementById('action-button').disabled = false;
                document.getElementById('action-button').classList.remove('opacity-50', 'cursor-not-allowed');
                document.getElementById('bottom-action-container').classList.add('hidden');
            }
        }

        function showCompletionNotification(score) {
            document.getElementById('notification-correct-count').textContent = score;
            document.getElementById('completion-notification').classList.remove('hidden');
        }

        function checkAnswer(index, inputElement) {
            if (inputElement.dataset.correct === 'completed') return;

            const vocabItem = VOCABULARY_DATA[index];
            const userInput = normalizeString(inputElement.value);
            const correctHiragana = normalizeString(vocabItem.hiragana);
            const artiIdElement = document.getElementById(`arti-id-${index}`);
            const artiEnElement = document.getElementById(`arti-en-${index}`);
            const cardElement = document.getElementById(`card-${index}`);

            inputElement.classList.remove('input-correct', 'input-incorrect', 'input-revealed');
            cardElement.classList.remove('card-correct');

            const isFilled = userInput !== '';
            const isCurrentlyCorrect = inputElement.dataset.correct === 'true';

            if (userInput === correctHiragana && isFilled) {
                inputElement.classList.add('input-correct');
                artiIdElement.classList.remove('hidden');
                artiEnElement.classList.remove('hidden');
                cardElement.classList.add('card-correct');

                if (!isCurrentlyCorrect) {
                    inputElement.dataset.correct = 'true';
                    correctCount++;
                }
            } else if (isFilled) {
                inputElement.classList.add('input-incorrect');
                artiIdElement.classList.add('hidden');
                artiEnElement.classList.add('hidden');
                
                if (isCurrentlyCorrect) {
                    inputElement.dataset.correct = 'false';
                    correctCount--;
                }
            } else {
                artiIdElement.classList.add('hidden');
                artiEnElement.classList.add('hidden');
                
                if (isCurrentlyCorrect) {
                    inputElement.dataset.correct = 'false';
                    correctCount--;
                }
            }
            
            updateCountsDisplay();
        }

        function showAllAnswers() {
            const inputElements = document.querySelectorAll('.vocab-input');
            inputElements.forEach(input => {
                input.disabled = true;
            });

            const actualUserScore = correctCount;

            VOCABULARY_DATA.forEach((vocab, index) => {
                const inputElement = document.getElementById(`input-${index}`);
                const artiIdElement = document.getElementById(`arti-id-${index}`);
                const artiEnElement = document.getElementById(`arti-en-${index}`);
                const correctHiragana = normalizeString(vocab.hiragana);
                const userInput = normalizeString(inputElement.value);

                artiIdElement.classList.remove('hidden');
                artiEnElement.classList.remove('hidden');
                
                if (userInput !== correctHiragana || inputElement.value.trim() === '') {
                    inputElement.value = vocab.hiragana;
                    inputElement.classList.remove('input-correct', 'input-incorrect');
                    inputElement.classList.add('input-revealed');
                } else {
                    inputElement.classList.add('input-correct');
                    document.getElementById(`card-${index}`).classList.add('card-correct');
                }
                inputElement.dataset.correct = 'completed';
            });

            isComplete = true;
            showCompletionNotification(actualUserScore);
            
            document.getElementById('correct-count-display').textContent = actualUserScore;
            document.getElementById('empty-count-display').textContent = 0;
            document.getElementById('action-button').disabled = true;
            document.getElementById('action-button').classList.add('opacity-50', 'cursor-not-allowed');
            document.getElementById('bottom-action-container').classList.remove('hidden');
        }

        function renderQuiz() {
            VOCABULARY_DATA = [...MASTER_VOCABULARY_DATA];
            shuffleArray(VOCABULARY_DATA);
            totalCount = VOCABULARY_DATA.length;
            correctCount = 0;
            emptyCount = totalCount;
            
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            
            VOCABULARY_DATA.forEach((vocab, index) => {
                const card = document.createElement('div');
                card.id = `card-${index}`;
                card.className = 'quiz-card';
                
                card.innerHTML = `
                    <div class="kanji-section">
                        <p class="kanji-label">Kanji</p>
                        <h3 class="kanji-text">${vocab.kanji}</h3>
                    </div>

                    <div class="input-section">
                        <label for="input-${index}" class="input-label">Input Hiragana/Katakana</label>
                        <input
                            type="text"
                            id="input-${index}"
                            data-correct="false"
                            onkeyup="checkAnswer(${index}, this)"
                            placeholder="Tulis cara baca di sini..."
                            class="vocab-input"
                            autocomplete="off"
                        />
                    </div>
                    
                    <div id="arti-id-${index}" class="meaning-box meaning-id hidden">
                        <p class="meaning-label">Arti Kata (ID)</p>
                        <p class="meaning-text">${vocab.arti}</p>
                    </div>

                    <div id="arti-en-${index}" class="meaning-box meaning-en hidden">
                        <p class="meaning-label">Meaning (EN)</p>
                        <p class="meaning-text">${vocab.english}</p>
                    </div>
                `;
                container.appendChild(card);
            });
            updateCountsDisplay();
        }

        function resetQuiz() {
            renderQuiz();
            
            isComplete = false;
            document.getElementById('completion-notification').classList.add('hidden');
            
            const actionButton = document.getElementById('action-button');
            actionButton.textContent = "Selesaikan Quiz!";
            actionButton.onclick = showAllAnswers;
            actionButton.disabled = false;
            actionButton.classList.remove('opacity-50', 'cursor-not-allowed');
            document.getElementById('bottom-action-container').classList.add('hidden');
        }

        window.onload = function() {
            createParticles();
            renderQuiz();
        };
    </script>
</body>
</html>
